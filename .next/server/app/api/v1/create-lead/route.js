(()=>{var e={};e.id=671,e.ids=[671],e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},9059:(e,t,s)=>{"use strict";s.r(t),s.d(t,{patchFetch:()=>v,routeModule:()=>u,serverHooks:()=>d,workAsyncStorage:()=>p,workUnitAsyncStorage:()=>c});var r={};s.r(r),s.d(r,{POST:()=>l});var a=s(2706),o=s(8203),i=s(5994),n=s(9187);async function l(e){console.log("POST request received",e);let{AMOCRM_DOMAIN:t,AMOCRM_ACCESS_TOKEN:s}=process.env,r=await fetch(`https://${t}/api/v4/catalogs`,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}}),a=r.headers.get("content-type");a?.includes("application/json")?console.log("Response data:",JSON.stringify(await r.json())):console.log("Response text:",await r.text())}console.log(async function(e){let{name:t,email:s,phone:r,purpose:a,message:o,_subject:i}=await e.json(),{AMOCRM_DOMAIN:l,AMOCRM_ACCESS_TOKEN:u}=process.env,p=await fetch(`https://${l}/api/v4/leads`,{method:"POST",headers:{Authorization:`Bearer ${u}`,"Content-Type":"application/json"},body:JSON.stringify([{name:t,custom_fields_values:[{field_id:673759,values:[{value:s}]},{field_id:673735,values:[{value:o}]},{field_id:673739,values:[{value:a}]},{field_id:673743,values:[{value:i}]},{field_id:673741,values:[{value:r}]}]}])}),c=p.headers.get("content-type");if(!p.ok){let e=`AmoCRM API Error: ${p.status} ${p.statusText}`;if(c?.includes("application/json")){let t=await p.json();e+=` - ${JSON.stringify(t)}`}else if(c?.includes("text/html")){let t=await p.text();e+=` - ${t.substring(0,200)}${t.length>200?"...":""}`}throw Error(e)}return console.log("Lead created successfully",JSON.stringify(await p.json())),n.NextResponse.json({success:!0,message:"Lead created successfully",data:null})});let u=new a.AppRouteRouteModule({definition:{kind:o.RouteKind.APP_ROUTE,page:"/api/v1/create-lead/route",pathname:"/api/v1/create-lead",filename:"route",bundlePath:"app/api/v1/create-lead/route"},resolvedPagePath:"/home/emre/Documents/Programming/Jobs/OnGoing/UzMall/uzmall-expo-website/src/app/api/v1/create-lead/route.ts",nextConfigOutput:"",userland:r}),{workAsyncStorage:p,workUnitAsyncStorage:c,serverHooks:d}=u;function v(){return(0,i.patchFetch)({workAsyncStorage:p,workUnitAsyncStorage:c})}},6487:()=>{},8335:()=>{}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,452],()=>s(9059));module.exports=r})();